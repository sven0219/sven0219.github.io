<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.52ynn.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="Original linkblog: https:&#x2F;&#x2F;www.rapidspike.com&#x2F;blog&#x2F;how-to-send-log-files-to-aws-cloudwatch-ubuntu&#x2F;">
<meta property="og:type" content="article">
<meta property="og:title" content="How to Send Log Files to AWS cloudwatch">
<meta property="og:url" content="https://blog.52ynn.top/2022/09/21/How-to-Send-Log-Files-to-AWS-cloudwatch/index.html">
<meta property="og:site_name" content="Sven&#39;s Blog">
<meta property="og:description" content="Original linkblog: https:&#x2F;&#x2F;www.rapidspike.com&#x2F;blog&#x2F;how-to-send-log-files-to-aws-cloudwatch-ubuntu&#x2F;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/aws-iam-create-role.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/aws-aim-attach-permissions-policies.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/ec2-instances.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/ec2-instances-attach-replace-iam-role.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-logs.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-log-group-1024x544.png">
<meta property="og:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-search-log-group-1024x544.png">
<meta property="article:published_time" content="2022-09-21T13:25:00.000Z">
<meta property="article:modified_time" content="2023-01-03T04:48:39.638Z">
<meta property="article:author" content="Sven">
<meta property="article:tag" content="aws">
<meta property="article:tag" content="cloudwatch">
<meta property="article:tag" content="alarm">
<meta property="article:tag" content="backup">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.rapidspike.com/wp-content/uploads/2019/07/aws-iam-create-role.png">

<link rel="canonical" href="https://blog.52ynn.top/2022/09/21/How-to-Send-Log-Files-to-AWS-cloudwatch/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>How to Send Log Files to AWS cloudwatch | Sven's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sven's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Do more ,say less !</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.52ynn.top/2022/09/21/How-to-Send-Log-Files-to-AWS-cloudwatch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Sven">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sven's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          How to Send Log Files to AWS cloudwatch
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-09-21 13:25:00" itemprop="dateCreated datePublished" datetime="2022-09-21T13:25:00+00:00">2022-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-01-03 04:48:39" itemprop="dateModified" datetime="2023-01-03T04:48:39+00:00">2023-01-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/skills/" itemprop="url" rel="index"><span itemprop="name">skills</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5.2k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Original-link"><a href="#Original-link" class="headerlink" title="Original link"></a>Original link</h1><p>blog: <a target="_blank" rel="noopener" href="https://www.rapidspike.com/blog/how-to-send-log-files-to-aws-cloudwatch-ubuntu/">https://www.rapidspike.com/blog/how-to-send-log-files-to-aws-cloudwatch-ubuntu/</a></p>
<span id="more"></span>

<p><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html">AWS CloudWatch</a> allows you to collect logs from your AWS EC2 instances. Files such as the Apache2 access and error logs that are commonly found on web servers. Or any log file. This is especially useful if you have a scaling group of instances behind a load balancer. Rather than connecting to each instance and manually searching the logs with <a target="_blank" rel="noopener" href="https://www.computerhope.com/unix/ugrep.htm">grep</a>, CloudWatch centralises the logs into one log stream, allowing you to search all your log files from one place.</p>
<p>For example, we have a few EC2 instances behind a Load Balancer to run our main platform API. They all run Apache2 so we send the contents of the Apache2 error log to CloudWatch. Even with just a few servers it’s much easier than logging into each one individually and searching each file with grep commands. Our <a target="_blank" rel="noopener" href="https://www.rapidspike.com/performance-synthetic-user-journey-monitoring/">User Journey</a> infrastructure has over 50 servers and would be practically impossible to manage through the command line alone. If an issue occurs we’re able to see all the logs in the AWS Console without wasting time logging onto everything.</p>
<p>To get CloudWatch set-up on Ubuntu, you need to complete the following:</p>
<ul>
<li>Create a new IAM role (one time only)</li>
<li>Attach the IAM role to an EC2 instance</li>
<li>Install and configure the CloudWatch agent</li>
</ul>
<h2 id="Create-a-New-IAM-Role"><a href="#Create-a-New-IAM-Role" class="headerlink" title="Create a New IAM Role"></a>Create a New IAM Role</h2><p>To allow an EC2 instance to communicate with CloudWatch, you first need to create an IAM Role. You only need to do this once, so you can skip this step after it’s been created.</p>
<ol>
<li><p>Open the <a target="_blank" rel="noopener" href="https://console.aws.amazon.com/iam/">IAM console</a>. From the menu, select <strong>Roles</strong> and then click the <strong>Create role</strong> button.</p>
</li>
<li><p>Under</p>
<p>Choose the service that will use this role</p>
<p>, select</p>
<p>EC2</p>
<p>and click the</p>
<p>Next: Permissions</p>
<p>button:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/aws-iam-create-role.png" alt="img"></p>
</li>
<li><p>Search for the</p>
<p>CloudWatchAgentServerPolicy</p>
<p>policy, check the checkbox and click</p>
<p>Next: Tags</p>
<p>:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/aws-aim-attach-permissions-policies.png" alt="img"></p>
</li>
<li><p>Add tags if required (I left them blank). Click <strong>Next: Review</strong>.</p>
</li>
<li><p>Enter a Role name (e.g. <em>CloudWatchAgentServerRole</em>). Then click <strong>Create role</strong>.</p>
</li>
</ol>
<h2 id="Attach-the-IAM-Role"><a href="#Attach-the-IAM-Role" class="headerlink" title="Attach the IAM Role"></a>Attach the IAM Role</h2><p>To attach the IAM Role to the EC2 instance, you can either do it through the AWS console or via the AWS Command Line Interface (CLI):</p>
<h3 id="1-Using-the-AWS-Console"><a href="#1-Using-the-AWS-Console" class="headerlink" title="1. Using the AWS Console"></a>1. Using the AWS Console</h3><p>Go to the <a target="_blank" rel="noopener" href="https://console.aws.amazon.com/ec2/">EC2 Dashboard</a>, select <strong>Instances</strong> from the menu and check the checkbox next to the EC2 instance you want to stream the logs from. To attach the IAM Role, click the <strong>Actions</strong> dropdown and select <strong>Instance Settings</strong> &gt; <strong>Attach&#x2F;Replace IAM Role</strong>:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/ec2-instances.png" alt="Go to the EC2 Dashboard, select Instances, Instance Settings, Attach/Replace IAM Role."></p>
<p>Search for and select the IAM role created above (e.g. <em>CloudWatchAgentServerRole</em>), then click <strong>Apply</strong> to attach the IAM role:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/ec2-instances-attach-replace-iam-role.png" alt="Attach/Replace IAM Role"></p>
<h3 id="2-Using-the-AWS-CLI"><a href="#2-Using-the-AWS-CLI" class="headerlink" title="2. Using the AWS CLI"></a>2. Using the AWS CLI</h3><p>This command was <a target="_blank" rel="noopener" href="https://aws.amazon.com/blogs/security/new-attach-an-aws-iam-role-to-an-existing-amazon-ec2-instance-by-using-the-aws-cli/">added to the AWS CLI in version 1.11.46</a>, so make sure you have the correct version (you can check the version with <code>aws --version</code>).</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ aws ec2 associate-iam-instance-profile --instance-id YourInstanceId --iam-instance-profile Name=CloudWatchAgentServerRole</span><br></pre></td></tr></table></figure>

<h2 id="Install-CloudWatch-Agent"><a href="#Install-CloudWatch-Agent" class="headerlink" title="Install CloudWatch Agent"></a>Install CloudWatch Agent</h2><p>Now everything is in place, connect to the EC2 instance you want to log data from and run through the following few commands. The first is to download the CloudWatch Agent from S3 (the following is for AMD64 Ubuntu, if you want a download for Centos, Debian, etc, see a full list <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/install-CloudWatch-Agent-commandline-fleet.html">here</a>):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://s3.amazonaws.com/amazoncloudwatch-agent/ubuntu/amd64/latest/amazon-cloudwatch-agent.deb</span><br></pre></td></tr></table></figure>

<p>Install the Agent with:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dpkg -i -E ./amazon-cloudwatch-agent.deb</span><br></pre></td></tr></table></figure>

<p>Now it’s installed it needs to be configured before it can be started. There are two ways to do this, using the wizard which will ask you a series of questions and generate a config file for you, or you can manually add a config file. As we’re only interested in logging one file to CloudWatch and it’s the same on each EC2 instance, it’s easy to manually add a config file:</p>
<h3 id="1-Manually-create-config-json"><a href="#1-Manually-create-config-json" class="headerlink" title="1. Manually create config.json"></a>1. Manually create config.json</h3><p>The Log Agent uses a config file located at <code>/opt/aws/amazon-cloudwatch-agent/bin/config.json</code>. Use your favourite editor (e.g. vim) to create and edit a file with the following content, e.g.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /opt/aws/amazon-cloudwatch-agent/bin/config.json</span><br><span class="line">&#123;</span><br><span class="line">     &quot;agent&quot;: &#123;</span><br><span class="line">         &quot;run_as_user&quot;: &quot;root&quot;</span><br><span class="line">     &#125;,</span><br><span class="line">     &quot;logs&quot;: &#123;</span><br><span class="line">         &quot;logs_collected&quot;: &#123;</span><br><span class="line">             &quot;files&quot;: &#123;</span><br><span class="line">                 &quot;collect_list&quot;: [</span><br><span class="line">                     &#123;</span><br><span class="line">                         &quot;file_path&quot;: &quot;/var/log/apache2/error.log&quot;,</span><br><span class="line">                         &quot;log_group_name&quot;: &quot;apache-error-log&quot;,</span><br><span class="line">                         &quot;log_stream_name&quot;: &quot;&#123;instance_id&#125;&quot;</span><br><span class="line">                     &#125;</span><br><span class="line">                 ]</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>The most important part of the config file is <code>file_path</code>. This is the path to the log file on the server that you want to collect data from. <code>/var/log/apache2/error.log</code> is the default error log for Apache on Ubuntu. The <code>log_group_name</code> and <code>log_stream_name</code> options are just used for naming the Log Group and Log Streams respectively in CloudWatch. I’d recommend keeping <code>&#123;instance_id&#125;</code> for the <code>log_stream_name</code> as this helps identify which EC2 instance sent the log data.</p>
<h3 id="2-Wizard"><a href="#2-Wizard" class="headerlink" title="2. Wizard"></a>2. Wizard</h3><p>To start the wizard run:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard</span><br></pre></td></tr></table></figure>

<p>You’ll be asked a series of questions. The Log Agent can be used to collect system-level metrics, so you will be asked about them. But you can ignore those questions as they’re not related to collecting logs. If you do use the wizard, you can always take the config file that’s generated and then manually add that (following the step above) to any additional instances.</p>
<h2 id="Start-the-Agent"><a href="#Start-the-Agent" class="headerlink" title="Start the Agent"></a>Start the Agent</h2><p>Run the following command to run the agent. The CloudWatch agent is integrated with systemd so it will start automatically after a reboot:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/bin/config.json -s</span><br></pre></td></tr></table></figure>

<h2 id="View-Logs"><a href="#View-Logs" class="headerlink" title="View Logs"></a>View Logs</h2><p>Once the log file you are watching has data written to it, you’ll be able to find it in CloudWatch. Go to the <a target="_blank" rel="noopener" href="https://console.aws.amazon.com/cloudwatch/">CloudWatch Overview</a> and select <strong>Logs</strong> from the menu. You should see the label for the Log Group you used in the config (e.g. <em>apache-error-log</em>).</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-logs.png" alt="CloudWatch Overview Log Group"></p>
<p>Click on the log group name to see the log streams. Each log stream uses the EC2 instance ID, so you know which EC2 instance logged the data:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-log-group-1024x544.png" alt="img"></p>
<p>To search the logs, click the <strong>Search Log Group</strong> button. In the filter text box, enter a search term to search <em>all</em> your log files in one go:</p>
<p><img src="https://www.rapidspike.com/wp-content/uploads/2019/07/cloudwatch-search-log-group-1024x544.png" alt="img"></p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/aws/" rel="tag"><i class="fa fa-tag"></i> aws</a>
              <a href="/tags/cloudwatch/" rel="tag"><i class="fa fa-tag"></i> cloudwatch</a>
              <a href="/tags/alarm/" rel="tag"><i class="fa fa-tag"></i> alarm</a>
              <a href="/tags/backup/" rel="tag"><i class="fa fa-tag"></i> backup</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/09/19/How-to-send-aws-cloud-watch-alarms-to-slack/" rel="prev" title="How to send aws cloud watch alarms to slack">
      <i class="fa fa-chevron-left"></i> How to send aws cloud watch alarms to slack
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/25/Docker-upgrade-issue/" rel="next" title="Docker upgrade issue">
      Docker upgrade issue <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Original-link"><span class="nav-number">1.</span> <span class="nav-text">Original link</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-a-New-IAM-Role"><span class="nav-number">1.1.</span> <span class="nav-text">Create a New IAM Role</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Attach-the-IAM-Role"><span class="nav-number">1.2.</span> <span class="nav-text">Attach the IAM Role</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Using-the-AWS-Console"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. Using the AWS Console</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Using-the-AWS-CLI"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. Using the AWS CLI</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-CloudWatch-Agent"><span class="nav-number">1.3.</span> <span class="nav-text">Install CloudWatch Agent</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Manually-create-config-json"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. Manually create config.json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Wizard"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. Wizard</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Start-the-Agent"><span class="nav-number">1.4.</span> <span class="nav-text">Start the Agent</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#View-Logs"><span class="nav-number">1.5.</span> <span class="nav-text">View Logs</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Sven</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">91</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sven0219" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;sven0219" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hi@svenshen.com" title="E-Mail → mailto:hi@svenshen.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="visitors-count">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <i class="fa fa-user-md"></i>
    <span id="busuanzi_container_site_uv">
       Visitors :<span id="busuanzi_value_site_uv"></span>
    </span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_pv">
       Views : <span id="busuanzi_value_site_pv"></span>
    </span>
</div>

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sven</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">276k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">4:11</span>
</div>


        








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'ffcb8e4e993246f4af3c',
      clientSecret: '83d999522d8c8f95f55bff4c2040b92858084127',
      repo        : 'sven0219.github.io',
      owner       : 'sven0219',
      admin       : ['sven0219'],
      id          : '13e2db239b1997dfe602e582dbb8d254',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
