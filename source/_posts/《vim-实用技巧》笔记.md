---
title: 《vim 实用技巧》笔记
tags:
  - vim
  - 笔记
  - 记录
id: '12249'
categories:
  - - skills
date: 2020-11-14 21:29:18
---

# 写在前面

`vim` 从从事运维工作开始时就使用了，但是实话实说，实际用到的功能只是 `vim` 强大功能的一小部分，这次乘着“双十一”京东图书优惠，买了一本《vim 实用技巧》学习一下，本文就用作读书笔记记录。 [![](https://i.loli.net/2020/11/14/6HIG91aNthKCemu.jpg)](https://i.loli.net/2020/11/14/6HIG91aNthKCemu.jpg)

# 第一章 Vim 解决问题的方式 (20201114)

## 技巧 1 认识`.`命令

`.`命令作用是重复上次操作，如我在一个文本文件中输入一行字符，然后输入`.`命令，则会重复输入该行 ![2020-11-14 21.38.21.gif](https://i.loli.net/2020/11/14/mSG9RpFiau1kJtl.gif) `.`会记录从插入模式到返回普通模式的**每一个**按键操作，在输入`.`命令后会重新执行所有这些按键操作。这样可以将`.`当做一个很小的宏（`macro`）.

## 技巧 2 不要自我重复

例如在所有行尾添加分号，`vim`提供了一个专门的命令，可以把两步操作合并成一步 ![2020-11-14 21.53.37.gif](https://i.loli.net/2020/11/14/JgDap3YTlRjENds.gif) 其中,`A`命令在当前行尾添加内容，通过该命令添加分号后，则可以使用`j.`（`j` 命令为下移）命令来给后续行添加分号提高效率。

## 技巧 3 以退为进

这个技巧在编程过程中可以经常使用到，如在指定字符前后各添加一个空格 ![2020-11-14 22.04.09.gif](https://i.loli.net/2020/11/14/gVNcOPiRU37Bh6m.gif) 其中： `f{char}`命令让`vim`查找下一处指定字符出现的位置，如果找到了直接移到那里 `s`命令为两个操作合并为一个：先删除光标上的字符，然后进入插入模式。 `;`命令会重复查找上次`f`命令所查找的字符

## 技巧 4 执行、重复、后退

上面几个重复操作很快捷，但是在执行过程中要很小心的按命令，输入错命令后可以执行撤回操作，下表例举了可重复的操作及如何后退

**目的**

**操作**

**重复**

**回退**

作出一个修改

{edit}

`.`

`u`

在行内查找下一指定字符

`f{char}/t{char}`

`;`

`,`

在行内查找上一指定字符

`F{char}/T{char}`

`;`

`,`

在文档查找下一匹配项

`/pattern<CR>`

`n`

`N`

在文档查找上一匹配项

`?pattern<CR>`

`n`

`N`

执行替换

`:s/target/replacement`

`&`

`u`

执行一系列修改

`qx{change}q`

`@x`

`u`

## 技巧 5 查找并手动替换

`:s/target/replacement`命令会替换文档中所有匹配项，但在实际场景中，我们可能只需要替换文档中某些字符，这时候就需要手动替换，如下操作为替换部分单词`content`为`copy` ![2020-11-14 22.32.17.gif](https://i.loli.net/2020/11/14/zRIqCPTBevyso3N.gif) 其中： `cw`命令会删除从光标位置到单词结尾的字符并进入插入模式

## 技巧 6 `.` 范式

作者将这一操作称为`.`范式：即用一键移动，另一键执行。 上面几个技巧都是在编辑完之后执行一个移动操作在执行`.`命令来进行执行重复操作。

# 第二章 普通模式（20201115）

## 技巧 7 停顿时请移开画笔

普通模式是`Vim`的默认模式，`Vim`是程序员使用的工具，程序员只是花一小部份时间编写代码。在普通模式中有众多工具可以使用。

## 技巧 8 把撤销单元切成块

`Vim`从进入插入模式开始，直到返回普通模式为止，在此期间输入或删除的任何内容都被当成一次修改。因此只要控制好对`<Esc>`键的使用，就可使撤销命令作用于单词、句子或段落。

## 技巧 9 构造可重复的修改

做一次操作前思考后面会不会重复，或者说在执行操作前构造一个可以重复的操作以便后续操作时使用到。

## 技巧 10 用次数做简单的算术运算

利用普通模式命令在执行时指定次数进行简单的算术运算。 如下修改每行的数值等差变化 ![2020-11-15 16.23.59.gif](https://i.loli.net/2020/11/15/5X2YAfsBE9uvK8R.gif)

## 技巧 11 能够重复，就别用次数

如果要删除一行字符中连续的两个单词，有如下三种方式： `d2w`：删除两个单词 `2dw`：执行两次删除一个单词的操作 `dw.`：重复删除单词的操作 这三个操作建议使用最后一个，虽然操作都是按三个按键，但是最后一个可以节省统计删除的单词的个数，相对来说计算按键的次数更简单，另外重复操作在出现错误时可以退回某次操作之前而不是退回到所有的操作之前。 口诀：执行、重复、回退。

## 技巧 12 双剑合璧，天下无敌

公式： 操作符 + 动作命令 = 操作 `daw`中`d`为操作符，`aw`为动作命令，合在一起就是删除一个单词的操作。 其它操作如`gUaw`即为把一个单词转换为大写字母。 下表为 vim 的操作符命令

命令

用途

`c`

修改

`d`

删除

`y`

复制到寄存器中

`g~`

反转大小写

`gu`

转换为小写

`gU`

转换为大写

`>`

增加缩进

`<`

减小缩进

`！`

使用外部程序过滤{motion}所跨越的行

# 第三章 插入模式