---
title: Nginx 重定向 301 和 302 的区别
tags:
  - nginx
id: '12388'
categories:
  - - skills
date: 2021-05-24 15:59:43
---

# 什么是 301 和 302 重定向

### 定义

##### 官方说法：

301，302 都是HTTP状态的编码，都代表着某个URL发生了转移，不同之处在于： 301 redirect: 301 代表永久性转移(Permanently Moved)。 302 redirect: 302 代表暂时性转移(Temporarily Moved )。

##### 对于用户来说：

301，302对用户来说没有区别，他们看到效果只是一个跳转，浏览器中旧的URL变成了新的URL。页面跳到了这个新的url指向的地方。

##### 对于引擎及站长

**302** 302转向可能会有URL规范化及网址劫持的问题。可能被搜索引擎判为可疑转向，甚至认为是作弊。 网址规范化 请参见：http://www.chinamyhosting.com/seoblog/2006/04/10/url-canonicalization/ 网址劫持 302重定向和网址劫持（URL hijacking）有什么关系呢？这要从搜索引擎如何处理302转向说起。从定义来说，从网址A做一个302重定向到网址B时，主机服务器的隐含意思是网址A随时有可能改主意，重新显示本身的内容或转向其他的地方。大部分的搜索引擎在大部分情况下，当收到302重定向时，一般只要去抓取目标网址就可以了，也就是说网址B。 实际上如果搜索引擎在遇到302转向时，百分之百的都抓取目标网址B的话，就不用担心网址URL劫持了。问题就在于，有的时候搜索引擎，尤其是Google，并不能总是抓取目标网址。为什么呢？比如说，有的时候A网址很短，但是它做了一个302重定向到B网址，而B网址是一个很长的乱七八糟的URL网址，甚至还有可能包含一些问号之类的参数。很自然的，A网址更加用户友好，而B网址既难看，又不用户友好。这时Google很有可能会仍然显示网址A。 由于搜索引擎排名算法只是程序而不是人，在遇到302重定向的时候，并不能像人一样的去准确判定哪一个网址更适当，这就造成了网址URL劫持的可能性。也就是说，一个不道德的人在他自己的网址A做一个302重定向到你的网址B，出于某种原因， Google搜索结果所显示的仍然是网址A，但是所用的网页内容却是你的网址B上的内容，这种情况就叫做网址URL劫持。你辛辛苦苦所写的内容就这样被别人偷走了。 **301** 当网页A用301重定向转到网页B时，搜索引擎可以肯定网页A永久的改变位置，或者说实际上不存在了，搜索引擎就会把网页B当作唯一有效目标。 301的好处是: 第一， 没有网址规范化问题。 第二， 也很重要的，网页A的PR网页级别会传到网页B。 301重定向主要是用于在域名的更改或者不带www的域名定向到带www的域名上，而302重定向可能我们的了解就比较少了，302重定向又称之为302代表暂时性转移，英文叫法为302 redirect，可以理解为暂时或者临时重定向。表示一个页面只是临时的搬到另一个页面上，从一些经验老道的SEO高手处得知，302重定向还有内部和外部之分，同一个域名中两个不同的页面之间的的临时重定向，这个成为为内部的临时重定向。另一种则是在不同的域名之间做临时的重定向，这种称为外部临时重定向。然而，基本上所有的搜索引擎都只把它定义为内部的302重定向。对此，如果是内部的302重定向搜索引擎并不会删除搜索结果中旧的页面。 301重定向被认为是目前域名更改后以最友好的方式展现给搜索引擎，也是业内用得最多的。在部落的网站中，之前有写过很多关于301的文章，比如301重定向是否成功的验证方法和wordpress博客301重定向失效的解决办法这两篇文章，其中包括实现的具体方法和其中出现的一些问题的处理方式，您都可以参考一下，具体就不再多讲。这里补充说明一下的是301重定向后到百度的反应时间需要多久，也是很多站长都关注的问题，而百度Lee给出的说法是：“网页的301跳转是受Spider网页更新周期制约的，这个更新周期目前来说可能比较长，我们也致力改进它”。很明显，这是一个很模糊的说法。 目前有部分站长将302 重定向应用到黑帽技术上，利用302的外部重定向来进行“302劫持”，即将别人的内容劫持到自的页面上，来获得更好的权重，这些一般是在交换您的友情链接上需要注意的事情。 如果您是进行新旧域名的替换，那么302重定向与301重定向的效果是一样的，并且都可以将旧域名的权重传递到新域名上，然而302却是以另外的方式——PR劫持来实现的。实现过程如下： 如果A做302临时重定向到B，A随时有可能改变主意显示本身或者做其他改变，那么当Googlebot(当然也包括Baiduspider)等搜身引擎蜘蛛抓取A的时候，实际上抓取的是目标地址B的内容，这样就导致A和B不同的地址有完全相同的内容，并且都被编入了索引，被认为是“利用重复的内容来干扰Google搜索结果的网站排名”，网站受到惩罚也是在情理之中。

# Nginx 中配置

301 跳转配置：

```nginx
server {
listen 80;
server_name 123.com;
rewrite ^/(.*) http://456.com/$1 permanent;
access_log off;
}
```

302 跳转配置

```nginx
server {
listen 80;
server_name 123.com;
rewrite ^/(.*) http://456.com/$1 redirect;
access_log off;
}
```